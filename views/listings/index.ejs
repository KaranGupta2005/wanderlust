<% layout('layouts/boilerplate') %>

<body>
  <%-include("../includes/slider.ejs")%>
  
  <br />
  <div
    class="row row-cols-xlg-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 row-cols-1"
  >
    <%for(let listing of allListings){ %>
    <a
      href="/listings/<%=listing._id %>"
      class="listing-links"
    >
      <div class="show-card card" data-aos="zoom-in-up">
        <img
          src="<%= listing.image.url %>"
          class="card-img-top"
          alt="listing_image"
          style="height: 20rem"
        />
        <div class="card-img-overlay">
          <p class="card-img-overlay-text"></p>
        </div>
        <div class="card-body" style="padding: 0">
          <p class="card-text">
            <b><%=listing.title%></b><br />
            <p class="price">&#8377;<%=listing.price.toLocaleString("en-IN")%> / night</p>
            <p class="taxPrice" style="display: none;">
            &#8377;<%= (listing.price * 1.18).toLocaleString("en-IN") %> / night
            </p>
          </p>
        </div>
      </div>
    </a>

    <% } %>
  </div>
</body>

<script>
  let toggleSwitch = document.querySelector("#flexSwitchCheckDefault");
  let price = document.getElementsByClassName("price");
  let taxPrice = document.getElementsByClassName("taxPrice");

  toggleSwitch.addEventListener("click", () => {
  for (let i = 0; i < price.length; i++) {
    if (taxPrice[i].style.display === "none" || taxPrice[i].style.display === "") {
      price[i].style.display = "none";
      taxPrice[i].style.display = "inline";
    } else {
      price[i].style.display = "inline";
      taxPrice[i].style.display = "none";
    }
  }
});

</script>

